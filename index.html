<!DOCTYPE html>
<html>
  	<meta charset="utf-8"/>
    <title>timed response</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="jspsych-6.0.5/jspsych.js"></script>
    <script src="jspsych-6.0.5/plugins/jspsych-html-keyboard-response.js"></script>
    <script src="jspsych-6.0.5/plugins/jspsych-image-keyboard-response.js"></script>
    <script src="jspsych-6.0.5/plugins/jspsych-image-button-response.js"></script>
     <script src="jspsych-6.0.5/plugins/jspsych-same-different-html.js"></script>
    <script src="jspsych-6.0.5/plugins/jspsych-dropdown.js"></script>
    <script src="jspsych-6.0.5/plugins/jspsych-survey-multi-choice.js"></script>
    <script src="jspsych-6.0.5/plugins/jspsych-survey-likert.js"></script>
    <script src="jspsych-6.0.5/plugins/jspsych-call-function.js"></script>

<!-- Include Choices CSS -->
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css"
/>
<!-- Include Choices JavaScript (latest) -->
<script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>

  <head>
    <link href="jspsych-6.0.5/css/jspsych.css" rel="stylesheet" type="text/css"></link>
    <script src="https://www.gstatic.com/firebasejs/6.2.4/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/6.2.4/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/6.2.4/firebase-database.js"></script>
  </head>
  <body>
    <pre id="participant"></pre>
    <script src="app.js"></script>
  </body>
  <script>

  	/* <script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js">< /script>

  	remember to take the space out of the second script

  	 <link rel = “stylesheet” href=“static/js/jspsych-6/choices.js/public/assets/styles/base.css”/>
    <link rel = “stylesheet” href=“static/js/jspsych-6/choices.js/public/assets/styles/choices.min.css”/>

  	*/

    var database = firebase.database();
  
    //this used to be in a plugin. Remember to put the 'r' back into script.
    //<script src="https://www.gstatic.com/firebasejs/4.6.2/firebase.js"></scipt>

    // Get a reference to the database service
    //var database = firebase.database();

    //create timeline
    var timeline = [];

    var robot = {
      type: "image-button-response",
      stimulus: 'img/horses.png',
      choices: ['Dolphin', 'Horse', 'Tiger', 'Elephant'],
      prompt: "<p>What animal is in the picture?</p>"
    };
    timeline.push(robot);

    
    //welcome message and instructions
    var welcome = {
      type: "html-keyboard-response",
      stimulus: "<p>Welcome to our experiment on lexical decision making.</p>" + "<p>We ask that you read the instructions <strong>carefully</strong> as you will not be able to go back during the experiment.</p>" + "<p>At the end, a <strong>pop-up</strong> will appear that can you can copy-paste into Mechanical Turk.</p>" +
      "<p style = 'font-size: 12px;'><strong>Press any key to continue.</strong></p>",
    };
    timeline.push(welcome);

    var calibration_test_instructions = {
      type: "html-keyboard-response",
      stimulus: "<p><strong><u>CALIBRATION TEST INSTRUCTIONS</u></strong></p>" + "<p>Before we begin our experiment, we ask that you complete a calibration test. </p>" + "<p>A blue circle will appear in the center of the screen. </p>" + "<p>When it does, press the letter <strong>F</strong> on your keyboard <strong>as fast as you can</strong>.</p>" + "<p style = 'font-size: 12px;'><strong>When you're ready, place your finger on the F key and press any key to begin.</p>",
      post_trial_gap: 1250
    };
    timeline.push(calibration_test_instructions);
    

    var test_stimuli = [
      {stimulus: "img/blue.png"},
    ];

    var calibration_fixation = {
      type: 'html-keyboard-response',
      stimulus: '<div style="font-size:60px;">+</div>',
      choices: jsPsych.NO_KEYS,
      //prompt: "<p>Press F when a blue circle appears.</p>",
      trial_duration: function() {
        return jsPsych.randomization.sampleWithoutReplacement([1000], 1)[0];
      }
    }

    var calibration_test = {
      type: "image-keyboard-response",
      stimulus: jsPsych.timelineVariable('stimulus'),
      choice: ['f']
    };

    var calibration_test_procedure = {
      timeline: [calibration_fixation, calibration_test],
      timeline_variables: test_stimuli,
      //randomized_order: true,
      repetitions: 5
    }
    timeline.push(calibration_test_procedure);

    var calibration_end = {
      type: "html-keyboard-response",
      stimulus: "<p>Thank you for completing the calibration test.</p>" + "<p style = 'font-size: 12px;'><strong>Press any key to continue.</p>" ,
    }
    timeline.push(calibration_end);


    var languages = ["Afrikaans","Albanian","Arabic","Armenian","Basque","Bengali","Bulgarian",
                                "Catalan","Cambodian","Chinese(Mandarin)","Croatian","Czech",
                                "Danish","Dutch","English","Estonian","Fiji","Finnish","French",
                                "Georgian","German","Greek","Gujarati","Hebrew","Hindi","Hungarian",
                                "Icelandic","Indonesian","Irish","Italian","Japanese","Javanese",
                                "Korean","Latin","Latvian","Lithuanian","Macedonian","Malay",
                                "Malayalam","Maltese","Maori","Marathi","Mongolian","Nepali",
                                "Norwegian","Persian","Polish","Portuguese","Punjabi","Quechua",
                                "Romanian","Russian","Samoan","Serbian","Slovak","Slovenian",
                                "Spanish","Swahili","Swedish","Tamil","Tatar","Telugu",
                                "Thai","Tibetan","Tonga","Turkish","Ukrainian","Urdu",
                                "Uzbek","Vietnamese","Welsh","Xhosa"];

    var ages = ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "24", "25",
    "26", "27", "28", "28", "30", "31", "32", "33", "34", "35", "36", "37", "38", "39", "40", "41", "42", "43", "44", "45", "46", "47", "48", "49", "50",
    "51", "52", "53", "54", "55", "56", "57", "58", "59", "60", "61", "62", "63", "64", "65", "66", "67", "68", "69", "70", "71", "72", "73", "75", "75", "76",
    "77", "78", "79", "80", "81", "82", "83", "84", "85", "86", "87", "88", "89", "90", "91", "92", "93", "94", "95", "96", "97", "98", "99", "100"];
    
    var sex = ["Male", "Female"];


var demographics = {
	type: 'dropdown',
	superq: "Please answer the following questions:",
    questions: [
		{
  			text: "<strong>What language do you speak most often?</strong>",
  			options: languages,
  			allowMultipleSelections: false,
  			required: true,
  			placeholder: "Select language",
		},
		{
 			text: "<strong>What language do you speak at home?</strong>",
  			options: languages,
  			allowMultipleSelections: false,
  			required: true,
  			placeholder: "Select language",
		},
		{
  			text: "<strong>What is your mother tongue? (i.e. the first language you learned at home during childhood and still understand to this day.)</strong>",
  			options: languages,
  			allowMultipleSelections: false,
  			required: true,
  			placeholder: "Select language",
		},
		{
  			text: "<strong>What is your age?</strong>",
  			options: ages,
  			allowMultipleSelections: false,
  			required: true,
  			placeholder: "Select age",
		},
		{
  			text: "<strong>What is your sex?</strong>",
  			options: ["Male", "Female", "Other"],
  			allowMultipleSelections: false,
  			required: true,
  			placeholder: "Select sex",
		}
		],
		};
timeline.push(demographics);

    
    //welcome message and instructions
    var welcome = {
      type: "html-keyboard-response",
      stimulus: "<p>This experiment is a lexical decision task.</p>" +
      "<p style = 'font-size: 12px;'><strong>Press any key to continue.</strong></p>",
    };
    timeline.push(welcome);
  
      var instructions = {
        type: "html-keyboard-response",
        stimulus: "<p><strong><u>INSTRUCTIONS</u></strong></p>" + "<p>A fixation cross will appear in the center of your screen followed by a word. The word will then change to either the correct past tense or an incorrect past tense.</p>" +
          "<br>If the word is the <strong>correct past tense</strong>, press the <strong>F key</strong>. If the word is an <strong>incorrect past tense</strong>, press the <strong>J key</strong>.</p>" + "<p><strong>Move as quickly as you can without losing accuracy.</strong></p>" + "<br><strong>When you're ready, place your fingers on the F and J keys.</p>" + "<p style = 'font-size: 12px;'><strong>Press any key to begin the practice test.</p>",
        post_trial_gap: 1250,};
     
      timeline.push(instructions);

    var practice_fixation = {
      type: 'html-keyboard-response',
      //stimulus: "<p><strong>+</strong></p>" + "<p style = 'color:White; font-size: 24px;'>ooo</p>",
      stimulus: "<p><strong>+</strong></p>",
      choices: jsPsych.NO_KEYS,
      //prompt: "Press F for correct word and J for not the correct word.",
      prompt: 
      	  "<div style='width: 600px;'>" +
          "<div style='float: left;'><img src='img/letter_f.png'></img>" +
          "<p class='small'><strong>correct past tense</strong></p></div>" + 
          "<div style='width: 600px;'>" +
          "<div class='float: right;'><img src='img/letter_j.png'></img>" +
          "<p class='small'><strong>incorrect past tense</strong></p></div>" +
          "</div>",
      trial_duration: function() {
        return jsPsych.randomization.sampleWithoutReplacement([1000], 1)[0];
      }
    };
    

    var practice_test_stimuli = [
      { stimulus: "<p>to jump</p>" + "<p style = 'font-size: 24px;'><strong>jumped</strong></p>" },
      { stimulus: "<p>to paint</p>" + "<p style = 'font-size: 24px;'><strong>painted</strong></p>" },
      { stimulus: "<p>to climb</p>" + "<p style = 'font-size: 24px;'><strong>clomb</strong></p>" },
      { stimulus: "<p>to seek</p>" + "<p style = 'font-size: 24px;'><strong>sought</strong></p>" },
      { stimulus: "<p>to fly</p>" + "<p style = 'font-size: 24px;'><strong>flewwed</strong></p>" },
      { stimulus: "<p>to quit</p>" + "<p style = 'font-size: 24px;'><strong>quought</strong></p>"},
      { stimulus: "<p>to smile</p>" + "<p style = 'font-size: 24px;'><strong>xpkyz</strong></p>"},
      { stimulus: "<p>to open</p>" + "<p style = 'font-size: 24px;'><strong>opened</strong></p>"},
      { stimulus: "<p>to kick</p>" + "<p style = 'font-size: 24px;'><strong>keecked</strong></p>" },
      { stimulus: "<p>to sing</p>" + "<p style = 'font-size: 24px;'><strong>sung</strong></p>"},
    ];

    var practice_test_1 = {
    type: 'same-different-html',
    stimuli: ['<p>to jump</p>', '<p>jumped</p>'],
    //timing_first_stim: 1000,
    second_stim_duration: null,
    //prompt: "Press F for the correct word and J for not the correct word.",

    prompt:  "<div style='width: 600px;'>" +
          "<div style='float: left;'><img src='img/letter_f.png'></img>" +
          "<p class='small'><strong>correct past tense</strong></p></div>" + 
          "<div style='width: 600px;'>" +
          "<div class='float: right;'><img src='img/letter_j.png'></img>" +
          "<p class='small'><strong>         incorrect past tense</strong></p></div>" +
          "</div>",

    same_key: 'f',
    different_key: 'j'
  };

      var practice_test_2 = {
    type: 'same-different-html',
    stimuli: ['<p>to paint</p>', '<p>painted</p>'],
    //timing_first_stim: 1000,
    second_stim_duration: null,
    //prompt: "Press F for the correct word and J for not the correct word.",
    prompt:  "<div style='width: 600px;'>" +
          "<div style='float: left;'><img src='img/letter_f.png'></img>" +
          "<p class='small'><strong>correct past tense</strong></p></div>" + 
          "<div style='width: 600px;'>" +
          "<div class='float: right;'><img src='img/letter_j.png'></img>" +
          "<p class='small'><strong>         incorrect past tense</strong></p></div>" +
          "</div>",

    same_key: 'f',
    different_key: 'j'
  };

      var practice_test_3 = {
    type: 'same-different-html',
    stimuli: ['<p>to climb</p>', '<p>clomb</p>'],
    //timing_first_stim: 1000,
   second_stim_duration: null,
    //prompt: "Press F for the correct word and J for not the correct word.",

    prompt:  "<div style='width: 600px;'>" +
          "<div style='float: left;'><img src='img/letter_f.png'></img>" +
          "<p class='small'><strong>correct past tense</strong></p></div>" + 
          "<div style='width: 600px;'>" +
          "<div class='float: right;'><img src='img/letter_j.png'></img>" +
          "<p class='small'><strong>         incorrect past tense</strong></p></div>" +
          "</div>",
    same_key: 'f',
    different_key: 'j'
  };

      var practice_test_4 = {
    type: 'same-different-html',
    stimuli: ['<p>to seek</p>', '<p>sought</p>'],
    timing_first_stim: 1000,
    second_stim_duration: null,
    //prompt: "Press F for the correct word and J for not the correct word.",

    prompt:  "<div style='width: 600px;'>" +
          "<div style='float: left;'><img src='img/letter_f.png'></img>" +
          "<p class='small'><strong>correct past tense</strong></p></div>" + 
          "<div style='width: 600px;'>" +
          "<div class='float: right;'><img src='img/letter_j.png'></img>" +
          "<p class='small'><strong>         incorrect past tense</strong></p></div>" +
          "</div>",
    same_key: 'f',
    different_key: 'j'
  };

      var practice_test_5 = {
    type: 'same-different-html',
    stimuli: ['<p>to fly</p>', '<p>flewwed</p>'],
    timing_first_stim: 1000,
   second_stim_duration: null,
    //prompt: "Press F for the correct word and J for not the correct word.",
    prompt:  "<div style='width: 600px;'>" +
          "<div style='float: left;'><img src='img/letter_f.png'></img>" +
          "<p class='small'><strong>correct past tense</strong></p></div>" + 
          "<div style='width: 600px;'>" +
          "<div class='float: right;'><img src='img/letter_j.png'></img>" +
          "<p class='small'><strong>         incorrect past tense</strong></p></div>" +
          "</div>",
    same_key: 'f',
    different_key: 'j'
  };

      var practice_test_6 = {
    type: 'same-different-html',
    stimuli: ['<p>to quit</p>', '<p>quought</p>'],
    timing_first_stim: 1000,
    second_stim_duration: null,
   // prompt: "Press F for the correct word and J for not the correct word.",

    prompt:  "<div style='width: 600px;'>" +
          "<div style='float: left;'><img src='img/letter_f.png'></img>" +
          "<p class='small'><strong>correct past tense</strong></p></div>" + 
          "<div style='width: 600px;'>" +
          "<div class='float: right;'><img src='img/letter_j.png'></img>" +
          "<p class='small'><strong>         incorrect past tense</strong></p></div>" +
          "</div>",

    same_key: 'f',
    different_key: 'j'
  };

      var practice_test_7 = {
    type: 'same-different-html',
    stimuli: ['<p>to smile</p>', '<p>xpkyz</p>'],
    timing_first_stim: 1000,
    second_stim_duration: null,
   // prompt: "Press F for the correct word and J for not the correct word.",
    prompt:  "<div style='width: 600px;'>" +
          "<div style='float: left;'><img src='img/letter_f.png'></img>" +
          "<p class='small'><strong>correct past tense</strong></p></div>" + 
          "<div style='width: 600px;'>" +
          "<div class='float: right;'><img src='img/letter_j.png'></img>" +
          "<p class='small'><strong>         incorrect past tense</strong></p></div>" +
          "</div>",
    same_key: 'f',
    different_key: 'j'
  };

    var practice_test_8 = {
    type: 'same-different-html',
    stimuli: ['<p>to open</p>', '<p>opened</p>'],
    timing_first_stim: 1000,
   second_stim_duration: null,
    //prompt: "Press F for the correct word and J for not the correct word.",

    prompt:  "<div style='width: 600px;'>" +
          "<div style='float: left;'><img src='img/letter_f.png'></img>" +
          "<p class='small'><strong>correct past tense</strong></p></div>" + 
          "<div style='width: 600px;'>" +
          "<div class='float: right;'><img src='img/letter_j.png'></img>" +
          "<p class='small'><strong>         incorrect past tense</strong></p></div>" +
          "</div>",

    same_key: 'f',
    different_key: 'j'
  };

    var practice_test_9 = {
    type: 'same-different-html',
    stimuli: ['<p>to kick</p>', '<p>keecked</p>'],
    timing_first_stim: 1000,
    second_stim_duration: null,
    //prompt: "Press F for the correct word and J for not the correct word.",

    prompt:  "<div style='width: 600px;'>" +
          "<div style='float: left;'><img src='img/letter_f.png'></img>" +
          "<p class='small'><strong>correct past tense</strong></p></div>" + 
          "<div style='width: 600px;'>" +
          "<div class='float: right;'><img src='img/letter_j.png'></img>" +
          "<p class='small'><strong>         incorrect past tense</strong></p></div>" +
          "</div>",
    same_key: 'f',
    different_key: 'j'
  };
    //creating the test
    var practice_test = {
      type: "html-keyboard-response",
      stimulus: jsPsych.timelineVariable('stimulus'),
      choices: ['f', 'j'],
      prompt:  
      	  "<div style='width: 600px;'>" +
          "<div style='float: left;'><img src='img/letter_f.png'></img>" +
          "<p class='small'><strong>correct past tense</strong></p></div>" + 
          "<div style='width: 600px;'>" +
          "<div class='float: right;'><img src='img/letter_j.png'></img>" +
          "<p class='small'><strong>         incorrect past tense</strong></p></div>" +
          "</div>"
    }


      var practice_one = {
      timeline: [practice_fixation, practice_test_1, practice_fixation, practice_test_2, practice_fixation, practice_test_3, practice_fixation, practice_test_4, practice_fixation, practice_test_5, practice_fixation, practice_test_6, practice_fixation, practice_test_7, practice_fixation, practice_test_8, practice_fixation, practice_test_9],
      //timeline_variables: practice_test_stimuli,
      //randomize_order: true
    };
    timeline.push(practice_one);


     var practice_thanks = {
      type: "html-keyboard-response",
      stimulus: "<p>Thank you for completing the practice test. We'll now begin the experiment, which will take about <strong>5 minutes</strong>.</p>" + "<p>Make sure you're in a comfortable position and free from any distractions such as music, the TV, other people in the room, etc.</p>" + "<p>This experiment requires your undivided attention. Data containinng unusual activity or response times must be excluded, and workers will not be paid.</p>" + "<br>A pop-up will appear at the end of the experiment. Please copy-paste this code into Mechanical Turk.</br>" + "<br><strong>When you're ready, place your fingers on the F and J keys.</p>" + "<p style = 'font-size: 12px;'><strong>Press any key to begin the experiment.</p>",
           post_trial_gap: 1250,
    };
    timeline.push(practice_thanks);
    //test stimuli data. Separated into 5 groups depending on inflection class (test_stimuli_one is all stimuli with an inflection class between 0 and 10, test_stimuli_two between 10 and 20, etc.)


var test_stimuli_38_1 = [
      { stimuli: ['<p>to drink</p>', '<p>drank</p>']},
      { stimuli: ['<p>to drink</p>', '<p>drinked</p>']},
      { stimuli: ['<p>to blink</p>', '<p>blank</p>']},
      { stimuli: ['<p>to blink</p>', '<p>blinked</p>']},

      ];

var test_stimuli_38_2 = [
      { stimuli: ['<p>to ring</p>', '<p>rang</p>']},
      { stimuli: ['<p>to ring</p>', '<p>ringed</p>']},
      { stimuli: ['<p>to ping</p>', '<p>pang</p>']},
      { stimuli: ['<p>to ping</p>', '<p>pinged</p>']},

      ];

var test_stimuli_38_3 = [ 
      { stimuli: ['<p>to sing</p>', '<p>sang</p>']},
      { stimuli: ['<p>to sing</p>', '<p>singed</p>']},
      { stimuli: ['<p>to wring</p>', '<p>wrang</p>']},
      { stimuli: ['<p>to wring</p>', '<p>wringed</p>']},

      ];

var test_stimuli_38_4 = [

      { stimuli: ['<p>to sink</p>', '<p>sank</p>']},
      { stimuli: ['<p>to sink</p>', '<p>sinked</p>']},
      { stimuli: ['<p>to link</p>', '<p>lank</p>']},
      { stimuli: ['<p>to link</p>', '<p>linked</p>']},

      ];

 var test_stimuli_38_5 = [

      { stimuli: ['<p>to spring</p>', '<p>sprang</p>']},
      { stimuli: ['<p>to spring</p>', '<p>springed</p>']},
      { stimuli: ['<p>to string</p>', '<p>strang</p>']},
      { stimuli: ['<p>to string</p>', '<p>stringed</p>']}
    
    ];

   var test_stimuli_15_1 = [

   	{ stimuli: ['<p>to ride</p>', '<p>rode</p>']},
    { stimuli: ['<p>to ride</p>', '<p>rided</p>']},
    { stimuli: ['<p>to side</p>', '<p>sode</p>']},
    { stimuli: ['<p>to side</p>', '<p>sided</p>']},

    ];

    var test_stimuli_15_2 = [

    { stimuli: ['<p>to shine</p>', '<p>shone</p>']},
    { stimuli: ['<p>to shine</p>', '<p>shined</p>']},
    { stimuli: ['<p>to whine</p>', '<p>whone</p>']},
    { stimuli: ['<p>to whine</p>', '<p>whined</p>']},

    ];

    var test_stimuli_15_3 = [

    { stimuli: ['<p>to dive</p>', '<p>dove</p>']},
    { stimuli: ['<p>to dive</p>', '<p>dived</p>']},
    { stimuli: ['<p>to thrive</p>', '<p>throve</p>']},
    { stimuli: ['<p>to thrive</p>', '<p>thrived</p>']},

    ];

    var test_stimuli_15_4 = [

    { stimuli: ['<p>to rise</p>', '<p>rose</p>']},
    { stimuli: ['<p>to rise</p>', '<p>rised</p>']},
    { stimuli: ['<p>to size</p>', '<p>soze</p>']},
    { stimuli: ['<p>to size</p>', '<p>sized</p>']},

    ];

    var test_stimuli_15_5 = [

    { stimuli: ['<p>to write</p>', '<p>wrote</p>']},
    { stimuli: ['<p>to write</p>', '<p>writed</p>']},
    { stimuli: ['<p>to excite</p>', '<p>excote</p>']},
    { stimuli: ['<p>to excite</p>', '<p>excited</p>']},
  
   ];

   var test_stimuli_8 = [

 	{ stimuli: ['<p>to grind</p>', '<p>ground</p>']},
    { stimuli: ['<p>to grind</p>', '<p>grinded</p>']},
    { stimuli: ['<p>to blind</p>', '<p>blound</p>']},
    { stimuli: ['<p>to blind</p>', '<p>blinded</p>']},
    
    ];

    var test_stimuli_28_1 = [
 	{ stimuli: ['<p>to hide</p>', '<p>hid</p>']},
    { stimuli: ['<p>to hide</p>', '<p>hided</p>']},
    { stimuli: ['<p>to side</p>', '<p>sid</p>']},
    { stimuli: ['<p>to side</p>', '<p>sided</p>']},

    ];

    var test_stimuli_28_2 = [
     	
    { stimuli: ['<p>to light</p>', '<p>lit</p>']},
    { stimuli: ['<p>to light</p>', '<p>lighted</p>']},
    { stimuli: ['<p>to blight</p>', '<p>blit</p>']},
    { stimuli: ['<p>to blight</p>', '<p>blighted</p>']},

    ];
     	
    var test_stimuli_28_3 = [

    { stimuli: ['<p>to slide</p>', '<p>slid</p>']},
    { stimuli: ['<p>to slide</p>', '<p>slided</p>']},
    { stimuli: ['<p>to glide</p>', '<p>glid</p>']},
    { stimuli: ['<p>to glide</p>', '<p>glided</p>']},
   
    ];

    var test_stimuli_30_1 = [

 	{ stimuli: ['<p>to blow</p>', '<p>blew</p>']},
    { stimuli: ['<p>to blow</p>', '<p>blowed</p>']},
    { stimuli: ['<p>to flow</p>', '<p>flew</p>']},
    { stimuli: ['<p>to flow</p>', '<p>flowed</p>']},

    ];

    var test_stimuli_30_2 = [

    { stimuli: ['<p>to grow</p>', '<p>grew</p>']},
    { stimuli: ['<p>to grow</p>', '<p>growed</p>']},
    { stimuli: ['<p>to snow</p>', '<p>snew</p>']},
    { stimuli: ['<p>to snow</p>', '<p>snowed</p>']},

    ];

    var test_stimuli_30_3 = [

    { stimuli: ['<p>to know</p>', '<p>knew</p>']},
    { stimuli: ['<p>to know</p>', '<p>knowed</p>']},
    { stimuli: ['<p>to row</p>', '<p>rew</p>']},
    { stimuli: ['<p>to row</p>', '<p>rowed</p>']},

    ];

    var test_stimuli_30_4 = [

    { stimuli: ['<p>to throw</p>', '<p>threw</p>']},
    { stimuli: ['<p>to throw</p>', '<p>throwed</p>']},
    { stimuli: ['<p>to slow</p>', '<p>slew</p>']},
    { stimuli: ['<p>to slow</p>', '<p>slowed</p>']},
    
    ];

    var test_stimuli_36_1 = [

 	{ stimuli: ['<p>to bleed</p>', '<p>bled</p>']},
    { stimuli: ['<p>to bleed</p>', '<p>bleeded</p>']},
    { stimuli: ['<p>to kneed</p>', '<p>kned</p>']},
    { stimuli: ['<p>to kneed</p>', '<p>kneeded</p>']},

    ];

    var test_stimuli_36_2 = [

    { stimuli: ['<p>to breed</p>', '<p>bred</p>']},
    { stimuli: ['<p>to breed</p>', '<p>breeded</p>']},
    { stimuli: ['<p>to bead</p>', '<p>bed</p>']},
    { stimuli: ['<p>to bead</p>', '<p>beaded</p>']},

    ];

    var test_stimuli_36_3 = [

    { stimuli: ['<p>to feed</p>', '<p>fed</p>']},
    { stimuli: ['<p>to feed</p>', '<p>feeded</p>']},
    { stimuli: ['<p>to need</p>', '<p>ned</p>']},
    { stimuli: ['<p>to need</p>', '<p>needed</p>']},
    
    ];

    var test_stimuli_20_1 = [

 	{ stimuli: ['<p>to fling</p>', '<p>flung</p>']},
    { stimuli: ['<p>to fling</p>', '<p>flinged</p>']},
    { stimuli: ['<p>to flick</p>', '<p>fluck</p>']},
    { stimuli: ['<p>to flick</p>', '<p>flicked</p>']},

    ];

     var test_stimuli_20_2 = [

    { stimuli: ['<p>to spin</p>', '<p>spun</p>']},
    { stimuli: ['<p>to spin</p>', '<p>spinned</p>']},
    { stimuli: ['<p>to grin</p>', '<p>grun</p>']},
    { stimuli: ['<p>to grin</p>', '<p>grinned</p>']},

    ];

     var test_stimuli_20_3 = [

    { stimuli: ['<p>to stick</p>', '<p>stuck</p>']},
    { stimuli: ['<p>to stick</p>', '<p>sticked</p>']},
    { stimuli: ['<p>to click</p>', '<p>cluck</p>']},
    { stimuli: ['<p>to click</p>', '<p>clicked</p>']},

    ];

     var test_stimuli_20_4 = [

    { stimuli: ['<p>to win</p>', '<p>won</p>']},
    { stimuli: ['<p>to win</p>', '<p>winned</p>']},
    { stimuli: ['<p>to sin</p>', '<p>son</p>']},
    { stimuli: ['<p>to sin</p>', '<p>sinned</p>']},

    ];

     var test_stimuli_20_5 = [

    { stimuli: ['<p>to swing</p>', '<p>swang</p>']},
    { stimuli: ['<p>to swing</p>', '<p>swinged</p>']},
    { stimuli: ['<p>to bring</p>', '<p>brang</p>']},
    { stimuli: ['<p>to bring</p>', '<p>bringed</p>']},
    
    ];

var test_stimuli_12_1 = [

 	{ stimuli: ['<p>to weep</p>', '<p>wept</p>']},
    { stimuli: ['<p>to weep</p>', '<p>weeped</p>']},
    { stimuli: ['<p>to beep</p>', '<p>bept</p>']},
    { stimuli: ['<p>to beep</p>', '<p>beeped</p>']},

    ];

    var test_stimuli_12_2 = [

    { stimuli: ['<p>to dream</p>', '<p>drempt</p>']},
    { stimuli: ['<p>to dream</p>', '<p>dreamed</p>']},
    { stimuli: ['<p>to screamed</p>', '<p>scrempt</p>']},
    { stimuli: ['<p>to scream</p>', '<p>screamed</p>']},

    ];

    var test_stimuli_12_3 = [

    { stimuli: ['<p>to mean</p>', '<p>meant</p>']},
    { stimuli: ['<p>to mean</p>', '<p>meaned</p>']},
    { stimuli: ['<p>to beam</p>', '<p>beamt</p>']},
    { stimuli: ['<p>to beam</p>', '<p>beamed</p>']},

    ];

    var test_stimuli_12_4 = [

    { stimuli: ['<p>to leap</p>', '<p>lept</p>']},
    { stimuli: ['<p>to leap</p>', '<p>leaped</p>']},
    { stimuli: ['<p>to peep</p>', '<p>pept</p>']},
    { stimuli: ['<p>to peep</p>', '<p>peeped</p>']},

	];

var test_stimuli_14_1 = [

 	{ stimuli: ['<p>to freeze</p>', '<p>froze</p>']},
    { stimuli: ['<p>to freeze</p>', '<p>freezed</p>']},
    { stimuli: ['<p>to sneeze</p>', '<p>snoze</p>']},
    { stimuli: ['<p>to sneeze</p>', '<p>sneezed</p>']},

    ];

    var test_stimuli_14_2 = [

    { stimuli: ['<p>to speak</p>', '<p>spoke</p>']},
    { stimuli: ['<p>to speak</p>', '<p>speaked</p>']},
    { stimuli: ['<p>to leak</p>', '<p>loke</p>']},
    { stimuli: ['<p>to leak</p>', '<p>leaked</p>']},

    ];

    var test_stimuli_14_3 = [

    { stimuli: ['<p>to steal</p>', '<p>stole</p>']},
    { stimuli: ['<p>to steal</p>', '<p>stealed</p>']},
    { stimuli: ['<p>to seal</p>', '<p>sole</p>']},
    { stimuli: ['<p>to seal</p>', '<p>sealed</p>']},

    ];

    var test_stimuli_14_4 = [

    { stimuli: ['<p>to weave</p>', '<p>wove</p>']},
    { stimuli: ['<p>to weave</p>', '<p>weaved</p>']},
    { stimuli: ['<p>to tease</p>', '<p>tose</p>']},
    { stimuli: ['<p>to tease</p>', '<p>teased</p>']},

	];

var test_stimuli_18_1 = [

 	{ stimuli: ['<p>to bend</p>', '<p>bent</p>']},
    { stimuli: ['<p>to bend</p>', '<p>bended</p>']},
    { stimuli: ['<p>to bond</p>', '<p>bont</p>']},
    { stimuli: ['<p>to bond</p>', '<p>bonded</p>']},

    ];

    var test_stimuli_18_2 = [
     	
    { stimuli: ['<p>to build</p>', '<p>built</p>']},
    { stimuli: ['<p>to build</p>', '<p>builded</p>']},
    { stimuli: ['<p>to bound</p>', '<p>bount</p>']},
    { stimuli: ['<p>to bound</p>', '<p>bounded</p>']},

    ];

    var test_stimuli_18_3 = [

 	{ stimuli: ['<p>to lend</p>', '<p>lent</p>']},
    { stimuli: ['<p>to lend</p>', '<p>lended</p>']},
    { stimuli: ['<p>to land</p>', '<p>lant</p>']},
    { stimuli: ['<p>to land</p>', '<p>landed</p>']},

    ];

    var test_stimuli_18_4 = [

    { stimuli: ['<p>to send</p>', '<p>sent</p>']},
    { stimuli: ['<p>to send</p>', '<p>sended</p>']},
    { stimuli: ['<p>to fend</p>', '<p>fent</p>']},
    { stimuli: ['<p>to fend</p>', '<p>fended</p>']},

    ];

    var test_stimuli_18_5 = [

    { stimuli: ['<p>to spend</p>', '<p>spent</p>']},
    { stimuli: ['<p>to spend</p>', '<p>spended</p>']},
    { stimuli: ['<p>to blend</p>', '<p>blent</p>']},
    { stimuli: ['<p>to blend</p>', '<p>blended</p>']},

];

var array = [test_stimuli_38_1, test_stimuli_38_2, test_stimuli_38_3, test_stimuli_38_4, test_stimuli_38_5, test_stimuli_15_1, test_stimuli_15_2, test_stimuli_15_3, test_stimuli_15_4, test_stimuli_15_5, test_stimuli_8, test_stimuli_28_1, test_stimuli_28_2, test_stimuli_28_3, test_stimuli_30_1, test_stimuli_30_2, test_stimuli_30_3, test_stimuli_30_4, test_stimuli_36_1, test_stimuli_36_2, test_stimuli_36_3, test_stimuli_20_1, test_stimuli_20_2, test_stimuli_20_3, test_stimuli_20_4, test_stimuli_20_5, test_stimuli_12_1, test_stimuli_12_2, test_stimuli_12_3, test_stimuli_12_4, test_stimuli_14_1, test_stimuli_14_2, test_stimuli_14_4, test_stimuli_18_1, test_stimuli_18_2, test_stimuli_18_3, test_stimuli_18_4, test_stimuli_18_5];
    
    //randomly selecting stimuli from each group, proportinal to the size of the groups. There are 85 in group 1, 609 in group 2, 156 in group 3, 167 in group 4, and 152 in group 5. 1169 in total. There are 11 stimuli total (I rounded to the nearest whole number, so there's one extra). //10, 50, 10, 10, 10, 20. (Made 20% smaller).
    var sample = jsPsych.randomization.sampleWithoutReplacement(array, 22);

    var big = sample[0].concat(sample[1], sample[2], sample[3], sample[4], sample[5]);

    var big_shuffled = jsPsych.randomization.shuffle(big);

    
    var small = sample[0].concat(sample[1]);

    var small_shuffled = jsPsych.randomization.shuffle(small);
    
    
    //creating the test
   var test = {
    type: 'same-different-html',
    stimuli: jsPsych.timelineVariable('stimuli'),
    //timing_first_stim: 1000,
    second_stim_duration: null,
    //prompt: "Press F for the correct word and J for not the correct word.",

    prompt:  "<div style='width: 600px;'>" +
          "<div style='float: left;'><img src='img/letter_f.png'></img>" +
          "<p class='small'><strong>correct past tense</strong></p></div>" + 
          "<div style='width: 600px;'>" +
          "<div class='float: right;'><img src='img/letter_j.png'></img>" +
          "<p class='small'><strong>         incorrect past tense</strong></p></div>" +
          "</div>",

    same_key: 'f',
    different_key: 'j'
  };

    /*
     prompt: "<div style='height: 700px; width: 500px; position: relative'>" +
          "<img style='position: absolute; top: 0px;'><img src='img/j.png'></img>" +
          "</div>"
    */
    

    //creating the individual trials and pushing them onto the timeline
    var trial_one = {
      timeline: [practice_fixation, test],
      timeline_variables: small_shuffled,
      //randomize_order: true
    }
    timeline.push(trial_one);

    
    /*
    var trial_two = {
      timeline: [test],
      timeline_variables: sample_two,
      randomize_order: true
    }
    //timeline.push(trial_two);

    var trial_three = {
      timeline: [test],
      timeline_variables: sample_three,
      randomize_order: true
    }
    //timeline.push(trial_three);

    var trial_four = {
      timeline: [test],
      timeline_variables: sample_four,
      randomize_order: true
    }
    //timeline.push(trial_four);

    var trial_five = {
      timeline: [test],
      timeline_variables: sample_five,
      randomize_order: true
    }
    //timeline.push(trial_five);

    var trial_six = {
      timeline: [test],
      timeline_variables: sample_six,
      randomize_order: true
    }
    //timeline.push(trial_six);

    var array = [trial_one, trial_two, trial_three, trial_four, trial_five, trial_six];
    var shuffledArray = jsPsych.randomization.shuffle(array);

    timeline.push(shuffledArray[0]);
    timeline.push(shuffledArray[1]);
    timeline.push(shuffledArray[2]);
    timeline.push(shuffledArray[3]);
    timeline.push(shuffledArray[4]);
    timeline.push(shuffledArray[5]);
    

    /*

    function saveData(name, data){
      var xhr = new XMLHttpRequest();
      xhr.open('POST', 'write_data.php'); // 'write_data.php' is the path to the php file described above.
      xhr.setRequestHeader('Content-Type', 'application/json');
      xhr.send(JSON.stringify({filename: name, filedata: data}));
    }

    function writeUserData(userID) {
      var id = firebase.database().ref('userID/');
      id.push(userID);
    }
    */
    var code = jsPsych.randomization.randomID(5);

    /*
    function makeid(){
      code = jsPsych.randomization.randomID(5);
      return code;
    }
    */

    function saveToFirebase(code, filedata){
      var ref = firebase.database().ref(code).set(filedata);
    }

    function writeUserData(code) {
      firebase.database().ref('users/' + code).set({
      //User ID: code,
      data: jsPsych.data.get().csv(),
      interactionData: jsPsych.data.getInteractionData().csv()
      });
    }

    //var code = makeid();

    var submit_block = {
      type: "html-keyboard-response",
      stimulus: "<strong>Congratulations!</strong>" + "<p>You've completed the experiment.</p>" + "<br>Thank you for your participation.</p>" + "<br>WARNING: the code will appear as a pop-up. You will not be able to access the code if you close the pop-up.</br>" + "<p style = 'font-size: 12px;'><strong>Press any key to receive the code.</strong></p>",
      timing_response: .001,      
      timing_post_trial: 0,
      on_finish: function() {
        //var code = makeid();
        writeUserData(code);
      }
    }
    timeline.push(submit_block);

    jsPsych.init({
      timeline: timeline,
      on_finish: function() {
        //var turk = jsPsych.turk.turkInfo().hitId
        alert("Your survey code is " + code + ". Please copy and paste this code into the homepage." + " You may then close this tab.");
      }
    });

    //var turk = 'TURK' + jsPsych.randomization.randomID(10);
  
  </script>
</html>